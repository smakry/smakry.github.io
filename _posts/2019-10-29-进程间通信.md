---
layout: post
title: '进程间通信'
date: 2019-10-29
author: smakry
tags: 进程间通信 阅读笔记
---

> 你我怎么联系 

## 目录  

- [管道pipe](#list_1)


---
 
### <span id = "list_1"></span> 管道pipe  

管道是一种最基本的IPC（Inter-Process Communication，进程间通信），作用于`有血缘关系的进程之间`，在进程间构建了一个`单向数据流动`的通道，数据通过一个进程流向另一个进程（`不能流向自己`）具有先后顺序，所以是`半双工通信`。  

- 管道的本质：是一个`伪文件`（linux一切皆文件，实际是`内核缓冲区`，是`一块内存区域`）  
- 管道的原理：内核使用`环形队列`，借助内核缓冲区（4K，这4k来自操作系统的系统内存？）实现  
- 创建管道：  
int pipe(int pipefd[2]); 成功：0； 失败：-1，设置errno   
创建成功后返回r/w两个文件描述符存放在pipefd，即`pipefd[0]->r`,`pipefd[1]->w`；`无需open`，但`需手动clos`e。管道文件的读写数据实际就是读写内核缓冲区。  

- 管道局限：  
    -  不能流向自己，数据自己读不能自己写  
    -  数据一旦被读走，便不在管道中了  
    -  半双工通信，只能在一个方向上流动（要双向需多进程）  
    -  只能在有公共祖先的进程间使用管道（没有祖先不知道流动关系）  

<https://blog.csdn.net/qq_42914528/article/details/82023408>